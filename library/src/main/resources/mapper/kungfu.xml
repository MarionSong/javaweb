<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.marion.library.mapper.KungfuMapper">
    <select id="kungfu" resultType="Kungfu">
        SELECT id,NAME,description FROM kungfu WHERE parentId = 1
    </select>

    <select id="findRank" resultType="Kungfu" parameterType="string">
        select * from kungfu where parentId =
          (select id from kungfu where name = #{name})
    </select>

    <insert id="addKungfu" useGeneratedKeys="true" keyProperty="id">
        insert into kungfu(name,description,parentId,createTime,updateTime) values(#{name},#{description},#{parentId},#{createTime},#{updateTime})
    </insert>

    <delete id="deleteKungfu">
        delete from kungfu where id=#{id} or parentId=#{id}
    </delete>

    <select id="selectById" resultType="Kungfu">
        select * from kungfu where id = #{id}
    </select>

    <update id="update" parameterType="Kungfu">
        update kungfu set name=#{name},description=#{description},updateTime=#{updateTime} where id=#{id}
    </update>

    <select id="findByName" resultType="long">
        select id from kungfu where name=#{name}
    </select>
    
    <insert id="addRank" keyProperty="id" useGeneratedKeys="true">
        insert into kungfu(name,parentId,note,createTime,updateTime)
          values(#{name},#{parentId},#{note},#{createTime},#{updateTime})
    </insert>

    <update id="updateRank" parameterType="Kungfu">
        update kungfu set name=#{name},note=#{note},updateTime=#{updateTime} where id=#{id}
    </update>

</mapper>
